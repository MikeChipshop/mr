<!doctype html>
<?php include 'keys.php'; ?>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>A tool to help you avoid the dreaded Scottish Highland Midge | Midger</title>
	<meta name="description" content="A tool to help you avoid the dreaded Scottish Highland Midge"/>
	<meta name="robots" content="noodp">
	<link rel="canonical" href="https://midger.uk/">
	<meta property="og:locale" content="en_GB">
	<meta property="og:type" content="website">
	<meta property="og:title" content="A tool to help you avoid the dreaded Highland Midge | Midger">
	<meta property="og:description" content="A tool to help you avoid the dreaded Highland Midge | Midger">
	<meta property="og:url" content="https://midger.uk/">
	<meta property="og:site_name" content="Midger">
	<meta name="twitter:card" content="summary">
	<meta name="twitter:description" content="A tool to help you avoid the dreaded Highland Midge | Midger">
	<meta name="twitter:title" content="A tool to help you avoid the dreaded Highland Midge | Midger">
	<meta name="twitter:image" content="https://midger.uk/assets/midger-avatar.jpg">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-title" content="Midger">
	<!-- Favicons -->	
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#06695c">
	<meta name="theme-color" content="#1f1f1f">
	<!-- End fav -->
	<script>try{Typekit.load({ async: true });}catch(e){}</script>
	<link rel="stylesheet" href="style.css" type="text/css" media="all">	
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">
	
</head>
<body>
	<div class="mt_main-splash-container">
 		<div class="mt_splash-wrap">
 			<div class="mt_splash-logo">
 				<div class="mt_svg-logo">
					<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 261.632 416.073"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Artboard 1</title><path class="cls-1" d="M111.346,266.059c-.08-1.45-.08-1.8.02-.6A3.108,3.108,0,0,1,111.346,266.059Zm38.94.45a3.21,3.21,0,0,1-.02-.61C150.366,264.689,150.366,265.049,150.286,266.509Z"/><path class="cls-1" d="M195.106,178.479l12.58-19.06h-29.66c14.33,33.56,32.93,76.27,32.93,76.27s19.99,61.77-7.42,80.77c-13.35,4.94-51.96-39.62-53.25-49.43-.32,5.07-6.79,23.66-12.14,38.31a7.6,7.6,0,0,1-14.26.05c-5.51-14.84-12.22-33.79-12.54-38.8-1.3,9.8-39.89,54.36-53.26,49.43-27.41-19.01-7.39-80.77-7.39-80.77s18.43-42.33,32.73-75.83H53.946l12.58,19.06-65.22,55.91L0,232.869l63.89-54.76-13.66-20.69h34.06c7.83-18.38,14.27-33.72,15.45-37.31.93-2.84,1.6-7.67,2.08-13.21l-40.07-9.6,24-15.46-26.58-22.3,1.29-1.53,28.65,24.04-22.34,14.39,35.22,8.44c.91-11.85,1.03-26.1.91-31.07a30.024,30.024,0,0,1,13.16-22.58c-7.95-19.47-27.62-36.98-54.45-51.23,41,19.39,52.53,38.88,58.33,49.15a10.5,10.5,0,0,1,9.46-2.24s.67-16.64,1.17-25.48a.127.127,0,0,0,0-.12c.08-1.33.17-2.49.23-3.36.06.83.14,1.99.24,3.34-.02.02-.02.04,0,.04.5,8.69,1.19,26.04,1.19,26.04a10.519,10.519,0,0,1,9.46,2.22c5.83-10.25,17.33-29.76,58.35-49.12-26.83,14.25-46.52,31.74-54.46,51.23a29.99,29.99,0,0,1,13.16,22.56c-.12,4.92-.01,18.9.88,30.67l35.25-8.44L172.526,82.1l28.65-24.05,1.29,1.54-26.58,22.3,24,15.45-40.11,9.61c.49,5.72,1.17,10.72,2.13,13.63,1.17,3.55,7.51,18.67,15.26,36.84h34.24l-13.66,20.69,63.89,54.76-1.3,1.52Z"/><circle class="cls-1" cx="130.816" cy="381.789" r="34.284"/></svg>
				</div>
				<h1>
					<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264.72664 99.75475"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Artboard 1</title><path class="cls-1" d="M187.23128,35.86825l-2.23-.5a1.40639,1.40639,0,0,1-1.1-1.15c-.75-5.48-5.24-8.81994-13.43-10.06994a5.55988,5.55988,0,0,0-1.82.03c-13.69,2.54-20.12,12.48-21.66,27.4l-1.19,14.02a3.61907,3.61907,0,0,1-.37,1.73c-4.14,6.6-6.89.04-6.87-.21.02-.16.07-3.24.1-3.39.57-3.24,6.9-39.38,9.22-56.39a3.97508,3.97508,0,0,0-2.29-4.13c-3.95-1.78-6.97-2.39-8.93-1.65a2.75367,2.75367,0,0,0-1.69,2.4c-.59,7.31-1.93,15.06-3.35,23.31-6.07-3.79-12.32-3.36-18.69-.06-5.14,4.89-8.72,12.91-11.16,23.23a3.54576,3.54576,0,0,0-.09.79,42.44967,42.44967,0,0,1-3.59,16.99,3.601,3.601,0,0,1-.39.69c-3.21,4.47-5.72,4.15-7.58-.51-1.32-1.39.88-13.39,7.15-37.63a1.69322,1.69322,0,0,0-.72-1.83,14.9483,14.9483,0,0,0-10.43-2.16,2.07833,2.07833,0,0,0-1.61,1.21c-5.49,11.92-7.92,26.76-8.13,43.7a5.65385,5.65385,0,0,0,.37,2.07c1.23,3.23,3.18,5.55,6.15,6.6a4.29861,4.29861,0,0,0,1.47.22h7.9a4.567,4.567,0,0,0,1.42-.21c4.37-1.4,7.78-3.5,9.68-6.72,2.36,4.91,6.25,7.95,12.5,8.06,6.1-.47,10.46-3.61005,12.69-10,1.15,4.32,3.57,7.03,8.25,6.87,6.56.21,11.33-1.8,13.5-7,2.65,4.29,6.27,6.65,11.31,6.13a10.79356,10.79356,0,0,0,8.95-4.46.15594.15594,0,0,1,.28.12c-1.98,9.76-5.1,15.55-9.28,17.6a3.35337,3.35337,0,0,1-2.87.01,14.94742,14.94742,0,0,1-5.39-4.4,3.47784,3.47784,0,0,0-3.21-1.28c-4.19.62-5.82,3.1-5,7.38a3.43177,3.43177,0,0,0,1,1.87c3.92,3.68,9.23,5.53,16.27,5.16,12.47.2,20.7-12.92005,24-41.56l2.21-20.4A1.741,1.741,0,0,0,187.23128,35.86825Zm-60.24,2.35-1.53,3.52a2.57963,2.57963,0,0,0,.42,2.71l1.11,1.27q-3.75,16.35-10.41,24.67005a1.11328,1.11328,0,0,1-1.99-.6c-1.06-14.62,1.24-31.99,8.78-37.22a2.42014,2.42014,0,0,1,3.71,1.45A11.54887,11.54887,0,0,1,126.99129,38.21822Zm40.38,28.96a3.72115,3.72115,0,0,1-6.66-1.54c-2.45-12.6.97-26.05,10.53-33.25,2.27-.55,2.84,2.4,2.07,8.15a4.15955,4.15955,0,0,1-.28.99005c-1.2,2.92-1.03,4.88,1.46,5.28C173.47133,55.02828,169.91133,63.53823,167.37129,67.17825Z"/><path class="cls-1" d="M74.15132,80.74825a3.07983,3.07983,0,0,1-2.38,3.39c-4.05.82-7.77-.29-11.19-3.08a4.07227,4.07227,0,0,1-1.47-2.6c-1.8-12.67005-2.35-31.86-2.26-54.5-5.42,12.14-10.03,29.56-14.18,49.95a3.32379,3.32379,0,0,1-3.41,2.66l-4.91-.24c-2.84-.42-4.97-1.75-5.94-4.57a263.51749,263.51749,0,0,1-.93-46.3c-5.49,9.55-11.77,34.55-13.17,42.3a2.59554,2.59554,0,0,0-.04.48,2.657,2.657,0,0,0,1.82,2.51,1.21777,1.21777,0,0,1,.83,1.38,28.85921,28.85921,0,0,1-3.92,10.09,4.84552,4.84552,0,0,1-4.8,2.17005,16.73655,16.73655,0,0,1-5.65-1.8,4.89019,4.89019,0,0,1-2.54-4.61005c2.87-42.69,22.02-66.06,28.33-72.67a5.26665,5.26665,0,0,1,4.99-1.51,21.06159,21.06159,0,0,1,4.95,1.78,4.20323,4.20323,0,0,1,2.32,3.68,11.8875,11.8875,0,0,1-1.49,5.81,4.90915,4.90915,0,0,0-.57,2.37c.09,9.85.01,20.52.81,31.39,6.79-21.27,13.38-38.92,19.45-47.09a3.587,3.587,0,0,1,2.13-1.37,11.1939,11.1939,0,0,1,7.89.77,3.69834,3.69834,0,0,1,1.91,3.29v14.57c0,.14-.01.27-.02.41C69.60133,36.05825,71.5013,57.77828,74.15132,80.74825Z"/><path class="cls-1" d="M264.71132,44.88827c-.31-3.01-1.5-4.42-3.66-4.07a3.20592,3.20592,0,0,0-2.37,2,10.29828,10.29828,0,0,1-3.35,4.16,1.61243,1.61243,0,0,1-.54.27c-2.21.61-3.56-.11-3.95-2.33.06-3.89,1.91-9.24,4.34-15.05a3.44218,3.44218,0,0,0-.39-3.38c-1.7-2.24-4.96-2.75-9.53-1.82-.52-1.1-2.79,2.12-3.65,6.66-3.74,19.8-5.66,16.65-2.9-.56v-.15a4.3474,4.3474,0,0,0-2.58-4.12,7.66016,7.66016,0,0,0-7.48.66,2.34684,2.34684,0,0,0-.27.2c-2.72,2.41-3.74,12.28-3.79,26.33a3.143,3.143,0,0,1-3.06,3.11l-.32.01a1.89439,1.89439,0,0,0-1.84,1.59c-1.56,9.5-6.26,14.9-13.31,17.22a1.45668,1.45668,0,0,1-.3.07c-11.36.95-8.62-23.67-3.99-17.59,1.09,1.43005,3.39,1.65,5.8,1.73a1.55449,1.55449,0,0,0,.52-.07c6.11-1.83,10.09-5.87,11.33-12.76a35.12552,35.12552,0,0,0,.69-14.94,2.842,2.842,0,0,0-.07-.28c-1.94-5.57-6.05-8.51-12.17-9.02a2.88127,2.88127,0,0,0-.41.02c-25.56,2.5-26.27,67.8.56,62.06a1.46278,1.46278,0,0,1,.29-.02c6.68-1.01,11.78-3.74,15.01-8.51a1.47452,1.47452,0,0,1,1.99-.42,17.57448,17.57448,0,0,0,6.68,2.49,3.54718,3.54718,0,0,0,4.02-3.02c1.34-9.67,3.95-18.3,5.67-25.53.93-3.91,1.56-4.22,2.75-.12.99,3.41,5.77,5.2,9.52,5.55a.84184.84184,0,0,0,.27-.04c5.59-1.3,8.92-4.50994,10.39-9.29A2.60173,2.60173,0,0,0,264.71132,44.88827Zm-62.13,5.1c1.05-7.9,3.16-14.32,6.18-19.47a.77815.77815,0,0,1,1.45.34,32.30721,32.30721,0,0,1-4.01,19.99c-.89,1.55-1.93,1.49-3.05.6A1.58828,1.58828,0,0,1,202.58131,49.98824Z"/><path class="cls-1" d="M87.34132,8.79824a11.12445,11.12445,0,0,1,.33-1.26c1.77-7.91,12.04-8.63995,12.85-6.50995,0,0,1.08,4.98,4.52,6.46a1.82486,1.82486,0,0,1,.76,1.97c-.67,5.02-4.22,8.31-9.94,10.28a2.69325,2.69325,0,0,1-.93.14C89.30128,19.61825,86.7513,15.94827,87.34132,8.79824Z"/></svg>
				</h1>
			</div>
			<div class="mt_intro-content">
				<h2>Midger is a tool to help you plan your Scottish outdoor pursuits around the ever looming threat of the Scottish Highland Midge.</h2>
				<button class="mt_start-call">Find my Midge score <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 475.33997 475.33002"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Artboard 1</title><g id="Layer_3" data-name="Layer 3"><path class="cls-1" d="M428.39,215.83A184.88109,184.88109,0,0,0,259.84,53.43V0h-30V53.43A184.89126,184.89126,0,0,0,61.28,215.83H0v30H60.18c4.06,93.29,77.28,168.65,169.66,176.07v53.43h30V421.9c92.38-7.42,165.6-82.78,169.65-176.07h45.85v-30ZM245.54242,394.66028A156.9953,156.9953,0,1,1,402.53772,237.665,156.99533,156.99533,0,0,1,245.54242,394.66028Z"/><circle class="cls-1" cx="245.54242" cy="237.66498" r="75.24729"/></g></svg>
</button>
				<div class="mt_manual-form">
					<form>
						<input type="text" placeholder="Town name / Postcode / Coords">
						<button><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 475.33997 475.33002"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Artboard 1</title><g id="Layer_3" data-name="Layer 3"><path class="cls-1" d="M428.39,215.83A184.88109,184.88109,0,0,0,259.84,53.43V0h-30V53.43A184.89126,184.89126,0,0,0,61.28,215.83H0v30H60.18c4.06,93.29,77.28,168.65,169.66,176.07v53.43h30V421.9c92.38-7.42,165.6-82.78,169.65-176.07h45.85v-30ZM245.54242,394.66028A156.9953,156.9953,0,1,1,402.53772,237.665,156.99533,156.99533,0,0,1,245.54242,394.66028Z"/><circle class="cls-1" cx="245.54242" cy="237.66498" r="75.24729"/></g></svg></button>
					</form>
				</div>
				<div class="information"></div>
			</div>
			<div class="result">
				<div class="mt_result-score"></div>
				<div class="mt_result-location"></div>
				<div class="mt_result-manual">Not your location? <a href="#">Choose location manually</a></div>
				<div class="mt_result-ui"></div>
				
			</div>
		</div>
	</div>
	<div class="mt_error-message mt_location-error-message">
		Midger works best when you allow it to access your devices location. Please close this message, click the orange button and accept the prompt to try again.
	</div>
	
	<script src="/assets/fontawesome/fontawesome.min.js"></script>
	<script src="/assets/fontawesome/fa-light.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script>
		$( document ).ready(function() {
			
			
			
			$("button").click(function() {
				
				// Get Location
				if(navigator.geolocation) {
					navigator.geolocation.getCurrentPosition(success);
				} else {
					console.log('blocked');
					$(".information").html('Your browser doesn\'t support the geolocation api.');
				}
				function success(position) {
					var userlat = position.coords.latitude;
					var userlon = position.coords.longitude;
					var userloc = "" + userlat + "," + userlon + "";
					$('button').html('Finding Location...  <svg id="Layer_3" data-name="Layer 3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 475.33997 475.33002"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Artboard 1</title><circle class="cls-1" cx="245.54242" cy="237.66498" r="75.24729"/><path class="cls-1" d="M238.51538,440.32514c-110.93817,0-200.86827-89.9301-200.86827-200.86826,0-110.92528,89.9301-200.85546,200.86827-200.85546,101.26578,0,185.0419,74.961,198.84676,172.40127h35.32473C458.93315,93.48839,359.02354,2.33,237.81171,2.33c-130.61558,0-236.5,105.88445-236.5,236.5s105.88446,236.5,236.5,236.5c121.21183,0,221.12144-91.15837,234.87516-208.67275H437.54128C424.26094,364.72451,340.21612,440.32514,238.51538,440.32514Z"/></svg>');
				
					$("body").addClass("mt_loading-data");
				
					console.log(userloc);
					$.ajax({ 
						type: "GET",
						dataType: "jsonp",
						//url: "https://midger.uk/api.php?loc="+ userloc +"",
						url: "https://midger.uk/apiv2/?<?php echo $secret; ?>&loc=" + userloc +"",
						cache: false,
						success: function(data){  
							var finalscore = data[0].results.score;
							console.log(finalscore);
							$(".mt_result-score").html(data[0].results.score);
							$(".mt_result-location").html(data[0].results.locationLabel);
							$("body").removeClass("mt_loading-data");
							$("body").addClass("mt_loaded-result");
							$(".mt_intro-content").hide();
							if (finalscore >= 75) {
								var scorecolor = "red";
							} else if (finalscore > 41 && finalscore <= 74) {
								var scorecolor = "amber";
							} else {
								var scorecolor = "blue";
							}
							$("body").addClass("mt_score-color-"+ scorecolor +"");
							$("body").addClass("circle-"+ finalscore +"");					

							$('.mt_result-score').each(function () {
								$(this).prop('Counter',0).animate({
									Counter: $(this).text()
								}, {
									duration: 3000,
									easing: 'swing',
									step: function (now) {
										$(this).text(Math.ceil(now));
									}
								});
							});
							

							$('.mt_result-ui').each(function () {
								$(this).prop('Counter',0).animate({
									Counter: $(this).addClass()
								}, {
									duration: 3000,
									easing: 'swing',
									step: function (now) {
										$(this).addClass(Math.ceil(now));
									}
								});
							}); 	
						} // End Success AJAX
					});
				}; // End success
			}); // endclick
		}); // End Doc Ready
		
		// Service worker call
		if ("serviceWorker" in navigator){
			navigator.serviceWorker
			.register("/serviceworker.js")
			.then(function(){
				console.log("Service Worker Registered");
			});
		}
	</script>
</body>
</html>